PS C:\ambulance-planning> git pull origin main
remote: Enumerating objects: 24, done.
remote: Counting objects: 100% (24/24), done.
remote: Compressing objects: 100% (11/11), done.
remote: Total 20 (delta 10), reused 18 (delta 9), pack-reused 0 (from 0)
Unpacking objects: 100% (20/20), 586.92 KiB | 3.24 MiB/s, done.
From https://github.com/colson89/ambulance-planning
 * branch            main       -> FETCH_HEAD
   1b821f0..aad04fa  main       -> origin/main
Updating 1b821f0..aad04fa
Fast-forward
 attached_assets/.env_1764066937608.env             |  27 ++
 ...eved-user-id-17-1764066932694_1764066932695.txt | 223 +++++++++++++++++
 ...ast-20-lines-fo-1764068158751_1764068158751.txt |  45 ++++
 ...ast-30-lines-fo-1764067849624_1764067849625.txt |  65 +++++
 ...ssfully-saved-i-1764067324901_1764067324901.txt | 271 +++++++++++++++++++++
 ...with-id-0-name--1764067046371_1764067046372.txt |  56 +++++
 .../Screenshot_20251125-111154_1764065620310.png   | Bin 0 -> 219023 bytes
 .../Screenshot_20251125-111154_1764068481048.png   | Bin 0 -> 219023 bytes
 .../Screenshot_20251125-115953_1764068481029.png   | Bin 0 -> 215874 bytes
 .../Screenshot_20251125-120013_1764068481008.png   | Bin 0 -> 71683 bytes
 .../Screenshot_20251125-120022_1764068480986.png   | Bin 0 -> 130690 bytes
 attached_assets/_1764067574134.env                 |  23 ++
 attached_assets/ecosystem.config_1764067377403.cjs |  31 +++
 scripts/build-sw.js                                |  43 +++-
 14 files changed, 783 insertions(+), 1 deletion(-)
 create mode 100644 attached_assets/.env_1764066937608.env
 create mode 100644 attached_assets/Pasted-0-ambulance-planning-Using-session-stationId-2-0-ambulance-planning-Retrieved-user-id-17-1764066932694_1764066932695.txt
 create mode 100644 attached_assets/Pasted-PS-C-ambulance-planning-pm2-logs-ambulance-planning-lines-20-TAILING-Tailing-last-20-lines-fo-1764068158751_1764068158751.txt
 create mode 100644 attached_assets/Pasted-PS-C-ambulance-planning-pm2-logs-ambulance-planning-lines-30-TAILING-Tailing-last-30-lines-fo-1764067849624_1764067849625.txt
 create mode 100644 attached_assets/Pasted-PS-C-ambulance-planning-pm2-save-PM2-Saving-current-process-list-PM2-Successfully-saved-i-1764067324901_1764067324901.txt
 create mode 100644 attached_assets/Pasted-PS-C-ambulance-planning-pm2-show-ambulance-planning-Describing-process-with-id-0-name--1764067046371_1764067046372.txt
 create mode 100644 attached_assets/Screenshot_20251125-111154_1764065620310.png
 create mode 100644 attached_assets/Screenshot_20251125-111154_1764068481048.png
 create mode 100644 attached_assets/Screenshot_20251125-115953_1764068481029.png
 create mode 100644 attached_assets/Screenshot_20251125-120013_1764068481008.png
 create mode 100644 attached_assets/Screenshot_20251125-120022_1764068480986.png
 create mode 100644 attached_assets/_1764067574134.env
 create mode 100644 attached_assets/ecosystem.config_1764067377403.cjs
PS C:\ambulance-planning> npm run db:push

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file 'C:\ambulance-planning\drizzle.config.ts'
Using 'pg' driver for database querying
[✓] Pulling schema from database...
[i] No changes detected
PS C:\ambulance-planning> npm install

up to date, audited 902 packages in 4s

148 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (5 moderate, 1 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
PS C:\ambulance-planning> npm run build

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist && node scripts/build-sw.js

vite v5.4.20 building for production...
✓ 2697 modules transformed.
../dist/public/index.html                                3.27 kB │ gzip:  1.07 kB
../dist/public/assets/index-B3Y_q5VG.css                72.07 kB │ gzip: 12.15 kB
../dist/public/assets/badge-DIQcjH3J.js                  0.75 kB │ gzip:  0.39 kB
../dist/public/assets/not-found-DW6Bxl2y.js              0.86 kB │ gzip:  0.45 kB
../dist/public/assets/alert-B-F-W9oX.js                  0.99 kB │ gzip:  0.51 kB
../dist/public/assets/label-CLwSgmtR.js                  1.14 kB │ gzip:  0.60 kB
../dist/public/assets/table-CbOt8J6D.js                  1.57 kB │ gzip:  0.56 kB
../dist/public/assets/switch-DTnDKssO.js                 2.56 kB │ gzip:  1.28 kB
../dist/public/assets/station-select-D7MkJ-2K.js         3.70 kB │ gzip:  1.44 kB
../dist/public/assets/integrations-vSOSn1JR.js           4.66 kB │ gzip:  1.46 kB
../dist/public/assets/alert-dialog-CoH2tsqP.js           4.86 kB │ gzip:  1.78 kB
../dist/public/assets/auth-page-BrmePEje.js              5.01 kB │ gzip:  2.06 kB
../dist/public/assets/nl-CR_TQarM.js                     5.08 kB │ gzip:  1.89 kB
../dist/public/assets/open-slot-warning-Dsyylj4P.js      6.35 kB │ gzip:  2.21 kB
../dist/public/assets/dialog-XbC_X1fS.js                 7.42 kB │ gzip:  2.75 kB
../dist/public/assets/checkbox-QIicBkgR.js              10.49 kB │ gzip:  3.90 kB
../dist/public/assets/weekday-settings-CxM6qv-S.js      11.47 kB │ gzip:  3.10 kB
../dist/public/assets/holidays-management-B0YNP4ft.js   12.46 kB │ gzip:  3.68 kB
../dist/public/assets/statistics-HP3d7lGn.js            15.82 kB │ gzip:  3.73 kB
../dist/public/assets/verdi-settings-CIxtFuH4.js        18.83 kB │ gzip:  5.01 kB
../dist/public/assets/dashboard-DjXqbby7.js             23.04 kB │ gzip:  6.61 kB
../dist/public/assets/form-Bl9dvnif.js                  27.53 kB │ gzip: 10.27 kB
../dist/public/assets/profile-3nCR8gwQ.js               32.44 kB │ gzip:  8.89 kB
../dist/public/assets/query-vendor-BUV8puuL.js          40.99 kB │ gzip: 12.43 kB
../dist/public/assets/shift-planner-C682UAS5.js         44.70 kB │ gzip: 13.72 kB
../dist/public/assets/ui-vendor-ChOlkxSZ.js             45.61 kB │ gzip: 11.20 kB
../dist/public/assets/schedule-generator-7Ke7kyaq.js    50.41 kB │ gzip: 11.72 kB
../dist/public/assets/types-DXX6iN7I.js                 60.80 kB │ gzip: 14.64 kB
../dist/public/assets/select-B69iWxjY.js                65.51 kB │ gzip: 23.25 kB
../dist/public/assets/index-DJnwc_9U.js                 70.12 kB │ gzip: 24.28 kB
../dist/public/assets/user-management-D-bY5z6U.js       85.16 kB │ gzip: 21.82 kB
../dist/public/assets/react-vendor-BsK_Cp9f.js         141.28 kB │ gzip: 45.44 kB
✓ built in 14.79s

  dist\index.js  306.4kb

Done in 51ms
✓ Copied manifest.json
✓ Copied service-worker.js
✓ Copied 9 icon files
✓ Build ID generated: 1764068810569
✓ Service worker generated
  Precached 43 files, totaling 1027550 bytes
PS C:\ambulance-planning> pm2 restart all
Use --update-env to update environment variables
[PM2] Applying action restartProcessId on app [all](ids: [ 0 ])
[PM2] [ambulance-planning](0) ✓
┌────┬───────────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name                  │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼───────────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 0  │ ambulance-planning    │ default     │ 1.0.0   │ fork    │ 32536    │ 1s     │ 13   │ online    │ 76.5%    │ 125.4mb  │ jeva400  │ disabled │
└────┴───────────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
PS C:\ambulance-planning> pm2 logs
[TAILING] Tailing last 15 lines for [all] processes (change the value with --lines option)
C:\Users\jeva400\.pm2\pm2.log last 15 lines:
PM2        | 2025-11-25T11:48:47: PM2 log: Stopping app:ambulance-planning id:0
PM2        | 2025-11-25T11:48:47: PM2 log: App [ambulance-planning:0] exited with code [1] via signal [SIGINT]
PM2        | 2025-11-25T11:48:47: PM2 log: pid=35624 msg=process killed
PM2        | 2025-11-25T11:48:47: PM2 log: App [ambulance-planning:0] starting in -fork mode-
PM2        | 2025-11-25T11:48:47: PM2 log: App [ambulance-planning:0] online
PM2        | 2025-11-25T11:51:37: PM2 log: Stopping app:ambulance-planning id:0
PM2        | 2025-11-25T11:51:38: PM2 log: App [ambulance-planning:0] exited with code [1] via signal [SIGINT]
PM2        | 2025-11-25T11:51:38: PM2 log: pid=40732 msg=process killed
PM2        | 2025-11-25T11:51:38: PM2 log: App [ambulance-planning:0] starting in -fork mode-
PM2        | 2025-11-25T11:51:38: PM2 log: App [ambulance-planning:0] online
PM2        | 2025-11-25T12:06:58: PM2 log: Stopping app:ambulance-planning id:0
PM2        | 2025-11-25T12:06:58: PM2 log: App [ambulance-planning:0] exited with code [1] via signal [SIGINT]
PM2        | 2025-11-25T12:06:58: PM2 log: pid=8056 msg=process killed
PM2        | 2025-11-25T12:06:58: PM2 log: App [ambulance-planning:0] starting in -fork mode-
PM2        | 2025-11-25T12:06:58: PM2 log: App [ambulance-planning:0] online

C:\Users\jeva400\.pm2\logs\ambulance-planning-error.log last 15 lines:
0|ambulanc |   headers: {
0|ambulanc |     'content-security-policy-report-only': "script-src 'none'; form-action 'none'; frame-src 'none'; report-uri https://csp.withgoogle.com/csp/goa-520bfc14_2",
0|ambulanc |     'content-type': 'text/plain; charset=utf-8',
0|ambulanc |     'cross-origin-opener-policy': 'same-origin',
0|ambulanc |     vary: 'Sec-Fetch-Site, Sec-Fetch-Mode, Sec-Fetch-Dest',
0|ambulanc |     'x-content-type-options': 'nosniff',
0|ambulanc |     'x-frame-options': 'SAMEORIGIN',
0|ambulanc |     'x-xss-protection': '0',
0|ambulanc |     date: 'Tue, 25 Nov 2025 11:08:45 GMT',
0|ambulanc |     'content-length': '47',
0|ambulanc |     'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'
0|ambulanc |   },
0|ambulanc |   body: 'push subscription has unsubscribed or expired.\n',
0|ambulanc |   endpoint: 'https://fcm.googleapis.com/fcm/send/fBDw1BeyqLw:APA91bHOYcukNbYjFpzQ4cDMGuQK_syyX3MpEpR_snVWEj9R-bfj-bUPqPGaLCWsXe_PskXuCXCBLZHhHRY7zNjL7w6b1Fvq2t2H_vi7tuF41OoHExqiFBrrc2gu1FF0f1SaZNd_XbMZ'
0|ambulanc | }

C:\Users\jeva400\.pm2\logs\ambulance-planning-out.log last 15 lines:
0|ambulanc | Using session stationId: 2
0|ambulanc | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulanc | 12:08:42 PM [express] POST /api/push/subscribe 200 in 7ms
0|ambulanc | === DESERIALIZE USER ===
0|ambulanc | Deserializing user: { id: 17, sessionStationId: 2 }
0|ambulanc | Using session stationId: 2
0|ambulanc | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulanc | 12:08:42 PM [express] GET /api/push/subscription 200 in 2ms
0|ambulanc | === DESERIALIZE USER ===
0|ambulanc | Deserializing user: { id: 17, sessionStationId: 2 }
0|ambulanc | Using session stationId: 2
0|ambulanc | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulanc |   Removing expired subscription for user 17
0|ambulanc | ✓ Push notification sent to user 17
0|ambulanc | 12:08:44 PM [express] POST /api/push/test 200 in 169ms

0|ambulance-planning  | === DESERIALIZE USER ===
0|ambulance-planning  | Deserializing user: { id: 17, sessionStationId: 2 }
0|ambulance-planning  | === DESERIALIZE USER ===
0|ambulance-planning  | Deserializing user: { id: 17, sessionStationId: 2 }
0|ambulance-planning  | Using session stationId: 2
0|ambulance-planning  | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulance-planning  | Using session stationId: 2
0|ambulance-planning  | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulance-planning  | === REQUIRE AUTH DEBUG ===
0|ambulance-planning  | isAuthenticated: true
0|ambulance-planning  | session: Session {
0|ambulance-planning  |   cookie: {
0|ambulance-planning  |     path: '/',
0|ambulance-planning  |     _expires: 2025-11-26T11:08:44.672Z,
0|ambulance-planning  |     originalMaxAge: 86400000,
0|ambulance-planning  |     httpOnly: true,
0|ambulance-planning  |     secure: false,
0|ambulance-planning  |     sameSite: 'lax'
0|ambulance-planning  |   },
0|ambulance-planning  |   passport: { user: { id: 17, stationId: 2 } }
0|ambulance-planning  | }
0|ambulance-planning  | user: {
0|ambulance-planning  |   id: 17,
0|ambulance-planning  |   username: 'tvdd19',
0|ambulance-planning  |   password: 'd9224999d08c7919c5043523e0ec3ca10add1df1dc0b02f274bab0f141b8dea9ed60444773aa20983c994701764d00fafc4a77107dc2f0387a3319af660da02f.fc21c559625516745f768f1dcfe8d2c9',
0|ambulance-planning  |   firstName: 'Tom',
0|ambulance-planning  |   lastName: 'Vandendijck',
0|ambulance-planning  |   email: '',
0|ambulance-planning  |   phoneNumber: null,
0|ambulance-planning  |   profilePhotoUrl: null,
0|ambulance-planning  |   role: 'admin',
0|ambulance-planning  |   isAdmin: false,
0|ambulance-planning  |   isProfessional: true,
0|ambulance-planning  |   hasDrivingLicenseC: true,
0|ambulance-planning  |   hours: 24,
0|ambulance-planning  |   stationId: 2
0|ambulance-planning  | }
0|ambulance-planning  | 12:09:16 PM [express] GET /api/user 200 in 5ms
0|ambulance-planning  | 12:09:16 PM [express] GET /api/calendar/token 200 in 5ms
0|ambulance-planning  | === DESERIALIZE USER ===
0|ambulance-planning  | Deserializing user: { id: 17, sessionStationId: 2 }
0|ambulance-planning  | Using session stationId: 2
0|ambulance-planning  | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulance-planning  | ✓ Push notification sent to user 17
0|ambulance-planning  | 12:09:17 PM [express] POST /api/push/test 200 in 100ms
0|ambulance-planning  | === DESERIALIZE USER ===
0|ambulance-planning  | Deserializing user: { id: 17, sessionStationId: 2 }
0|ambulance-planning  | Using session stationId: 2
0|ambulance-planning  | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulance-planning  | ✓ Push notification sent to user 17
0|ambulance-planning  | 12:09:21 PM [express] POST /api/push/test 200 in 61ms


