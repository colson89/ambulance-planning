
C:\Users\Administrator\.pm2\logs\ambulance-planning-error.log last 100 lines:
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Verdi ERROR details: [ 'This shift conflicts with one or more already planned shifts' ]
0|ambulanc | Error updating weekday config: error: null value in column "night_shift_count" of relation "weekday_configs" violates not-null constraint
0|ambulanc |     at C:\ambulance-planning\node_modules\pg\lib\client.js:545:17
0|ambulanc |     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
0|ambulanc |     at async file:///C:/ambulance-planning/node_modules/drizzle-orm/node-postgres/session.js:83:22
0|ambulanc |     at async DatabaseStorage.updateWeekdayConfig (file:///C:/ambulance-planning/dist/index.js:2361:29)
0|ambulanc |     at async file:///C:/ambulance-planning/dist/index.js:4301:29 {
0|ambulanc |   length: 282,
0|ambulanc |   severity: 'ERROR',
0|ambulanc |   code: '23502',
0|ambulanc |   detail: 'Failing row contains (23, 3, 1, t, t, 1, null, 2025-11-14 13:58:08.44, f).',
0|ambulanc |   hint: undefined,
0|ambulanc |   position: undefined,
0|ambulanc |   internalPosition: undefined,
0|ambulanc |   internalQuery: undefined,
0|ambulanc |   where: undefined,
0|ambulanc |   schema: 'public',
0|ambulanc |   table: 'weekday_configs',
0|ambulanc |   column: 'night_shift_count',
0|ambulanc |   dataType: undefined,
0|ambulanc |   constraint: undefined,
0|ambulanc |   file: 'execMain.c',
0|ambulanc |   line: '1987',
0|ambulanc |   routine: 'ExecConstraints'
0|ambulanc | }
0|ambulanc | Error updating weekday config: error: null value in column "night_shift_count" of relation "weekday_configs" violates not-null constraint
0|ambulanc |     at C:\ambulance-planning\node_modules\pg\lib\client.js:545:17
0|ambulanc |     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
0|ambulanc |     at async file:///C:/ambulance-planning/node_modules/drizzle-orm/node-postgres/session.js:83:22
0|ambulanc |     at async DatabaseStorage.updateWeekdayConfig (file:///C:/ambulance-planning/dist/index.js:2361:29)
0|ambulanc |     at async file:///C:/ambulance-planning/dist/index.js:4301:29 {
0|ambulanc |   length: 283,
0|ambulanc |   severity: 'ERROR',
0|ambulanc |   code: '23502',
0|ambulanc |   detail: 'Failing row contains (23, 3, 1, t, t, 1, null, 2025-11-14 13:58:09.944, f).',
0|ambulanc |   hint: undefined,
0|ambulanc |   position: undefined,
0|ambulanc |   internalPosition: undefined,
0|ambulanc |   internalQuery: undefined,
0|ambulanc |   where: undefined,
0|ambulanc |   schema: 'public',
0|ambulanc |   table: 'weekday_configs',
0|ambulanc |   column: 'night_shift_count',
0|ambulanc |   dataType: undefined,
0|ambulanc |   constraint: undefined,
0|ambulanc |   file: 'execMain.c',
0|ambulanc |   line: '1987',
0|ambulanc |   routine: 'ExecConstraints'
0|ambulanc | }
0|ambulanc | USER CREATION ERROR: error: duplicate key value violates unique constraint "users_username_unique"
0|ambulanc |     at C:\ambulance-planning\node_modules\pg\lib\client.js:545:17
0|ambulanc |     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
0|ambulanc |     at async file:///C:/ambulance-planning/node_modules/drizzle-orm/node-postgres/session.js:83:22
0|ambulanc |     at async DatabaseStorage.createUser (file:///C:/ambulance-planning/dist/index.js:595:20)
0|ambulanc |     at async file:///C:/ambulance-planning/dist/index.js:3035:20 {
0|ambulanc |   length: 214,
0|ambulanc |   severity: 'ERROR',
0|ambulanc |   code: '23505',
0|ambulanc |   detail: 'Key (username)=(bave198) already exists.',
0|ambulanc |   hint: undefined,
0|ambulanc |   position: undefined,
0|ambulanc |   internalPosition: undefined,
0|ambulanc |   internalQuery: undefined,
0|ambulanc |   where: undefined,
0|ambulanc |   schema: 'public',
0|ambulanc |   table: 'users',
0|ambulanc |   column: undefined,
0|ambulanc |   dataType: undefined,
0|ambulanc |   constraint: 'users_username_unique',
0|ambulanc |   file: 'nbtinsert.c',
0|ambulanc |   line: '673',
0|ambulanc |   routine: '_bt_check_unique'
0|ambulanc | }

C:\Users\Administrator\.pm2\logs\ambulance-planning-out.log last 100 lines:
0|ambulanc |   'gube551:7', 'rigo488:5', 'gist529:7', 'phho162:5', 'jobo31:7',
0|ambulanc |   'jevb631:1', 'stry334:1', 'elru411:8', 'elvs521:8', 'esds634:8',
0|ambulanc |   'jeva418:2', 'daru306:2', 'dica261:2', 'fidr571:2', 'glph405:2',
0|ambulanc |   'jobo257:2', 'joli301:2', 'joni495:2', 'liro562:2', 'pibe297:2',
0|ambulanc |   'mava296:2', 'guva285:2', 'kepe505:1', 'stra614:1', 'dygr460:2',
0|ambulanc |   'toho21:2',  'svvb422:5', 'bawo25:2',  'bagi20:2',  'bjlo22:2',
0|ambulanc |   'frba17:2',  'niae66:2',  'drru293:2', 'wvdv327:1'
0|ambulanc | ]
0|ambulanc | DEBUG: getUsersByStation called with stationId: 2
0|ambulanc | DEBUG: Found 22 primary users for station 2: [
0|ambulanc |   'tvdd19:17',   'topo298:58',
0|ambulanc |   'jeva418:159', 'daru306:163',
0|ambulanc |   'dica261:164', 'fidr571:166',
0|ambulanc |   'glph405:167', 'jobo257:168',
0|ambulanc |   'joli301:169', 'joni495:170',
0|ambulanc |   'liro562:171', 'pibe297:172',
0|ambulanc |   'mava296:174', 'guva285:175',
0|ambulanc |   'dygr460:181', 'toho21:157',
0|ambulanc |   'bawo25:180',  'bagi20:156',
0|ambulanc |   'bjlo22:158',  'frba17:155',
0|ambulanc |   'niae66:179',  'drru293:165'
0|ambulanc | ]
0|ambulanc | DEBUG: Found 1 additional users for station 2: [ 'jeva400:87' ]
0|ambulanc | DEBUG: Adding additional user jeva400:87 to results
0|ambulanc | DEBUG: Total 23 users returned for station 2
0|ambulanc | Admin gets users for station 2: 23 users (including cross-station)
0|ambulanc | 11:48:44 AM [express] GET /api/users 200 in 6ms :: [{"id":156,"username":"bagi20","firstName":"Bart "…
0|ambulanc | === DESERIALIZE USER ===
0|ambulanc | Deserializing user: { id: 17, sessionStationId: 2 }
0|ambulanc | Using session stationId: 2
0|ambulanc | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulanc | 11:48:47 AM [express] DELETE /api/users/158 500 in 5ms :: {"message":"Failed to delete user"}
0|ambulanc | === DESERIALIZE USER ===
0|ambulanc | Deserializing user: { id: 17, sessionStationId: 2 }
0|ambulanc | === DESERIALIZE USER ===
0|ambulanc | Deserializing user: { id: 17, sessionStationId: 2 }
0|ambulanc | Using session stationId: 2
0|ambulanc | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulanc | Using session stationId: 2
0|ambulanc | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulanc | === GET /api/users DEBUG ===
0|ambulanc | Admin user object: {
0|ambulanc |   "id": 17,
0|ambulanc |   "username": "tvdd19",
0|ambulanc |   "password": "Admin123",
0|ambulanc |   "firstName": "Tom",
0|ambulanc |   "lastName": "Vandendijck",
0|ambulanc |   "email": "",
0|ambulanc |   "role": "admin",
0|ambulanc |   "isAdmin": false,
0|ambulanc |   "isProfessional": true,
0|ambulanc |   "hasDrivingLicenseC": true,
0|ambulanc |   "hours": 24,
0|ambulanc |   "stationId": 2
0|ambulanc | }
0|ambulanc | Admin stationId: 2
0|ambulanc | Admin role: admin
0|ambulanc | 11:48:58 AM [express] GET /api/user 200 in 4ms :: {"id":17,"username":"tvdd19","password":"Admin123",…
0|ambulanc | All users from database: 99
0|ambulanc | Users station IDs: [
0|ambulanc |   'thhu81:3',  'vidb464:3', 'ivgo344:1', 'drpa338:1', 'emth312:1',
0|ambulanc |   'fima342:1', 'gihe566:1', 'gihu503:1', 'jabe308:1', 'javk322:1',
0|ambulanc |   'jisr332:1', 'jomi499:1', 'jost468:1', 'juvh324:1', 'mami479:1',
0|ambulanc |   'math470:1', 'svdb435:1', 'tove318:1', 'toth471:1', 'rost612:1',
0|ambulanc |   'stli351:1', 'robu535:5', 'jowe210:5', 'gime604:1', 'mita313:1',
0|ambulanc |   'pavh191:5', 'rodk152:5', 'havm323:1', 'jope179:5', 'sevl577:5',
0|ambulanc |   'stma453:5', 'siba534:5', 'vile170:5', 'suku611:1', 'bave198:5',
0|ambulanc |   'tvdd19:2',  'rvdb189:5', 'guel545:1', 'sthe7:1',   'topo298:2',
0|ambulanc |   'bami339:1', 'jaco37:7',  'dimu355:6', 'rove319:1', 'kuwu580:1',
0|ambulanc |   'maka546:1', 'timi86:3',  'gico556:5', 'babo142:5', 'jovv423:5',
0|ambulanc |   'chve200:5', 'stke427:3', 'todo73:3',  'tivr108:3', 'koge76:3',
0|ambulanc |   'anwo64:3',  'ivve60:3',  'jolu48:3',  'jeva400:8', 'mast555:3',
0|ambulanc |   'leve509:3', 'pave61:3',  'mvdb95:3',  'dero484:7', 'rume450:7',
0|ambulanc |   'gube551:7', 'rigo488:5', 'gist529:7', 'phho162:5', 'jobo31:7',
0|ambulanc |   'jevb631:1', 'stry334:1', 'elru411:8', 'elvs521:8', 'esds634:8',
0|ambulanc |   'jeva418:2', 'daru306:2', 'dica261:2', 'fidr571:2', 'glph405:2',
0|ambulanc |   'jobo257:2', 'joli301:2', 'joni495:2', 'liro562:2', 'pibe297:2',
0|ambulanc |   'mava296:2', 'guva285:2', 'kepe505:1', 'stra614:1', 'dygr460:2',
0|ambulanc |   'toho21:2',  'svvb422:5', 'bawo25:2',  'bagi20:2',  'bjlo22:2',
0|ambulanc |   'frba17:2',  'niae66:2',  'drru293:2', 'wvdv327:1'
0|ambulanc | ]
0|ambulanc | DEBUG: getUsersByStation called with stationId: 2
0|ambulanc | DEBUG: Found 22 primary users for station 2: [
0|ambulanc |   'tvdd19:17',   'topo298:58',
0|ambulanc |   'jeva418:159', 'daru306:163',
0|ambulanc |   'dica261:164', 'fidr571:166',
0|ambulanc |   'glph405:167', 'jobo257:168',
0|ambulanc |   'joli301:169', 'joni495:170',
0|ambulanc |   'liro562:171', 'pibe297:172',
0|ambulanc |   'mava296:174', 'guva285:175',
0|ambulanc |   'dygr460:181', 'toho21:157',
0|ambulanc |   'bawo25:180',  'bagi20:156',
0|ambulanc |   'bjlo22:158',  'frba17:155',
0|ambulanc |   'niae66:179',  'drru293:165'
0|ambulanc | ]
0|ambulanc | DEBUG: Found 1 additional users for station 2: [ 'jeva400:87' ]
0|ambulanc | DEBUG: Adding additional user jeva400:87 to results
0|ambulanc | DEBUG: Total 23 users returned for station 2
0|ambulanc | Admin gets users for station 2: 23 users (including cross-station)
0|ambulanc | 11:48:58 AM [express] GET /api/users 200 in 7ms :: [{"id":156,"username":"bagi20","firstName":"Bart "…

0|ambulance-planning  | === DESERIALIZE USER ===
0|ambulance-planning  | Deserializing user: { id: 17, sessionStationId: 2 }
0|ambulance-planning  | === DESERIALIZE USER ===
0|ambulance-planning  | Deserializing user: { id: 17, sessionStationId: 2 }
0|ambulance-planning  | Using session stationId: 2
0|ambulance-planning  | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulance-planning  | Using session stationId: 2
0|ambulance-planning  | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulance-planning  | === GET /api/users DEBUG ===
0|ambulance-planning  | Admin user object: {
0|ambulance-planning  |   "id": 17,
0|ambulance-planning  |   "username": "tvdd19",
0|ambulance-planning  |   "password": "Admin123",
0|ambulance-planning  |   "firstName": "Tom",
0|ambulance-planning  |   "lastName": "Vandendijck",
0|ambulance-planning  |   "email": "",
0|ambulance-planning  |   "role": "admin",
0|ambulance-planning  |   "isAdmin": false,
0|ambulance-planning  |   "isProfessional": true,
0|ambulance-planning  |   "hasDrivingLicenseC": true,
0|ambulance-planning  |   "hours": 24,
0|ambulance-planning  |   "stationId": 2
0|ambulance-planning  | }
0|ambulance-planning  | Admin stationId: 2
0|ambulance-planning  | Admin role: admin
0|ambulance-planning  | 11:50:22 AM [express] GET /api/user 200 in 9ms :: {"id":17,"username":"tvdd19","password":"Admin123",…
0|ambulance-planning  | All users from database: 99
0|ambulance-planning  | Users station IDs: [
0|ambulance-planning  |   'thhu81:3',  'vidb464:3', 'ivgo344:1', 'drpa338:1', 'emth312:1',
0|ambulance-planning  |   'fima342:1', 'gihe566:1', 'gihu503:1', 'jabe308:1', 'javk322:1',
0|ambulance-planning  |   'jisr332:1', 'jomi499:1', 'jost468:1', 'juvh324:1', 'mami479:1',
0|ambulance-planning  |   'math470:1', 'svdb435:1', 'tove318:1', 'toth471:1', 'rost612:1',
0|ambulance-planning  |   'stli351:1', 'robu535:5', 'jowe210:5', 'gime604:1', 'mita313:1',
0|ambulance-planning  |   'pavh191:5', 'rodk152:5', 'havm323:1', 'jope179:5', 'sevl577:5',
0|ambulance-planning  |   'stma453:5', 'siba534:5', 'vile170:5', 'suku611:1', 'bave198:5',
0|ambulance-planning  |   'tvdd19:2',  'rvdb189:5', 'guel545:1', 'sthe7:1',   'topo298:2',
0|ambulance-planning  |   'bami339:1', 'jaco37:7',  'dimu355:6', 'rove319:1', 'kuwu580:1',
0|ambulance-planning  |   'maka546:1', 'timi86:3',  'gico556:5', 'babo142:5', 'jovv423:5',
0|ambulance-planning  |   'chve200:5', 'stke427:3', 'todo73:3',  'tivr108:3', 'koge76:3',
0|ambulance-planning  |   'anwo64:3',  'ivve60:3',  'jolu48:3',  'jeva400:8', 'mast555:3',
0|ambulance-planning  |   'leve509:3', 'pave61:3',  'mvdb95:3',  'dero484:7', 'rume450:7',
0|ambulance-planning  |   'gube551:7', 'rigo488:5', 'gist529:7', 'phho162:5', 'jobo31:7',
0|ambulance-planning  |   'jevb631:1', 'stry334:1', 'elru411:8', 'elvs521:8', 'esds634:8',
0|ambulance-planning  |   'jeva418:2', 'daru306:2', 'dica261:2', 'fidr571:2', 'glph405:2',
0|ambulance-planning  |   'jobo257:2', 'joli301:2', 'joni495:2', 'liro562:2', 'pibe297:2',
0|ambulance-planning  |   'mava296:2', 'guva285:2', 'kepe505:1', 'stra614:1', 'dygr460:2',
0|ambulance-planning  |   'toho21:2',  'svvb422:5', 'bawo25:2',  'bagi20:2',  'bjlo22:2',
0|ambulance-planning  |   'frba17:2',  'niae66:2',  'drru293:2', 'wvdv327:1'
0|ambulance-planning  | ]
0|ambulance-planning  | DEBUG: getUsersByStation called with stationId: 2
0|ambulance-planning  | DEBUG: Found 22 primary users for station 2: [
0|ambulance-planning  |   'tvdd19:17',   'topo298:58',
0|ambulance-planning  |   'jeva418:159', 'daru306:163',
0|ambulance-planning  |   'dica261:164', 'fidr571:166',
0|ambulance-planning  |   'glph405:167', 'jobo257:168',
0|ambulance-planning  |   'joli301:169', 'joni495:170',
0|ambulance-planning  |   'liro562:171', 'pibe297:172',
0|ambulance-planning  |   'mava296:174', 'guva285:175',
0|ambulance-planning  |   'dygr460:181', 'toho21:157',
0|ambulance-planning  |   'bawo25:180',  'bagi20:156',
0|ambulance-planning  |   'bjlo22:158',  'frba17:155',
0|ambulance-planning  |   'niae66:179',  'drru293:165'
0|ambulance-planning  | ]
0|ambulance-planning  | DEBUG: Found 1 additional users for station 2: [ 'jeva400:87' ]
0|ambulance-planning  | DEBUG: Adding additional user jeva400:87 to results
0|ambulance-planning  | DEBUG: Total 23 users returned for station 2
0|ambulance-planning  | Admin gets users for station 2: 23 users (including cross-station)
0|ambulance-planning  | 11:50:22 AM [express] GET /api/users 200 in 15ms :: [{"id":156,"username":"bagi20","firstName":"Bart …
0|ambulance-planning  | === DESERIALIZE USER ===
0|ambulance-planning  | Deserializing user: { id: 17, sessionStationId: 2 }
0|ambulance-planning  | Using session stationId: 2
0|ambulance-planning  | Retrieved user: { id: 17, username: 'tvdd19', stationId: 2, role: 'admin' }
0|ambulance-planning  | 11:50:25 AM [express] DELETE /api/users/158 500 in 7ms :: {"message":"Failed to delete user"}